@{
    ViewData["Title"] = "Services";
}

<div class="container">
    <div class="row">
    <div class="col-md-6">
        <h1 class="my-4 text-left">
            Weather for <span id="cityName"></span>
            </h1>
    </div>
    <div class="col-md-6 mt-4">
        <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Enter City" id="city" aria-label="Search" style="border-color:#2878eb;">
                <button class="btn btn-outline-primary" type="submit" id="submit" style="border-color:#f14d5d; color: #f14d5d;">Search</button>
        </form>
    </div>
    </div>
    
    <main>
        <div class="row row-cols-1 row-cols-md-3 mb-3 text-center">
            <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm border-primary">
                    <div class="card-header py-3 text-bg-primary border-primary" style="background-color:#2878eb;">
                        <h4 class="my-0 fw-normal" style="color:white;">Temperatures</h4>
                    </div>
                    <div class="card-body">
                        <h1 class="card-title pricing-card-title">
                            <span id="temp1"></span><small class="text-muted fw-light"><span>&#8451;</span></small>
                        </h1>
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>Temperature is <span id="temp"></span></li>
                            <li>Min Temperature is <span id="min_temp"></span></li>
                            <li>Max Temperature is <span id="max_temp"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm border-primary">
                    <div class="card-header py-3 text-bg-primary border-primary" style="background-color:#2878eb;">
                        <h4 class="my-0 fw-normal" style="color:white;">Humidity Info</h4>
                    </div>
                    <div class="card-body">
                        <h1 class="card-title pricing-card-title">
                            <span id="humidity1"></span><small class="text-muted fw-light">%</small>
                        </h1>
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>Wind Degree is <span id="wind_degrees"></span></li>
                            <li>Feels like <span id="feels_like"></span></li>
                            <li>Humidity is <span id="humidity"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card mb-4 rounded-3 shadow-sm border-primary">
                    <div class="card-header py-3 text-bg-primary border-primary" style="background-color:#2878eb;">
                        <h4 class="my-0 fw-normal" style="color:white;">Wind Info</h4>
                    </div>
                    <div class="card-body">
                        <h1 class="card-title pricing-card-title">
                            <span id="wind_speed1"></span><small class="text-muted fw-light"> km/hr</small>
                        </h1>
                        <ul class="list-unstyled mt-3 mb-4">
                            <li>Wind Speed is <span id="wind_speed"></span></li>
                            <li>Sunrise Time is <span id="sunrise"></span></li>
                            <li>Sunset Time is <span id="sunset"></span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <h2 class="display-6 text-center mb-4">World Wide Weather</h2>

        <div class="table-responsive">
            <table class="table text-center table-hover table-bordered">
                <thead>
                    <tr>
                        <th style="width: 34%;">Cities</th>
                        <th style="width: 22%;">Humidity</th>
                        <th style="width: 22%;">Temp</th>
                        <th style="width: 22%;">Wind_Speed</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row" class="text-start text-center">New York</th>
                        <td><span id="humidity4"></span></td>
                        <td><span id="temp4"></span></td>
                        <td><span id="wind_speed4"></span></td>
                    </tr>
                    <tr>
                        <th scope="row" class="text-start text-center">Los Angeles</th>
                        <td><span id="humidity5"></span></td>
                        <td><span id="temp5"></span></td>
                        <td><span id="wind_speed5"></span></td>
                    </tr>
                </tbody>

                <tbody>
                    <tr>
                        <th scope="row" class="text-start text-center">Chicago</th>
                        <td><span id="humidity2"></span></td>
                        <td><span id="temp2"></span></td>
                        <td><span id="wind_speed2"></span></td>
                    </tr>
                    <tr>
                        <th scope="row" class="text-start text-center">Houston</th>
                        <td><span id="humidity3"></span></td>
                        <td><span id="temp3"></span></td>
                        <td><span id="wind_speed3"></span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>
</div>
<!-- Cards end.. -->

@section Scripts{

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

  <script>
        const options = {
            method: 'GET',
            headers: {
                'X-RapidAPI-Key': '9fad2ca468msh4acb682e321b33ap15fa83jsnabf007606941',
                'X-RapidAPI-Host': 'weather-by-api-ninjas.p.rapidapi.com'
            }
        };



        const getWeather = (city) => {
            cityName.innerHTML = city
            fetch('https://weather-by-api-ninjas.p.rapidapi.com/v1/weather?city=' + city, options)
                .then(response => response.json())
                .then((response) => {
                    console.log(response)

                    // cloud_pct.innerHTML = response.cloud_pct
                    temp.innerHTML = response.temp
                    temp1.innerHTML = response.temp
                    feels_like.innerHTML = response.feels_like
                    humidity.innerHTML = response.humidity
                    humidity1.innerHTML = response.humidity
                    min_temp.innerHTML = response.min_temp
                    max_temp.innerHTML = response.max_temp
                    wind_speed.innerHTML = response.wind_speed
                    wind_speed1.innerHTML = response.wind_speed
                    wind_degrees.innerHTML = response.wind_degrees
                    sunrise.innerHTML = response.sunrise
                    sunset.innerHTML = response.sunset
                })
                .catch(err => console.error(err));
        }

        // Chicago

        fetch('https://weather-by-api-ninjas.p.rapidapi.com/v1/weather?city=Chicago', options)
            .then(response => response.json())
            .then((response) => {
                console.log(response)


                temp2.innerHTML = response.temp
                humidity2.innerHTML = response.humidity
                wind_speed2.innerHTML = response.wind_speed
            })
            .catch(err => console.error(err));

        // Chicago End

        fetch('https://weather-by-api-ninjas.p.rapidapi.com/v1/weather?city=Houston', options)
            .then(response => response.json())
            .then((response) => {
                console.log(response)


                temp3.innerHTML = response.temp
                humidity3.innerHTML = response.humidity
                wind_speed3.innerHTML = response.wind_speed
            })
            .catch(err => console.error(err));

        fetch('https://weather-by-api-ninjas.p.rapidapi.com/v1/weather?city=New York', options)
            .then(response => response.json())
            .then((response) => {
                console.log(response)


                temp4.innerHTML = response.temp

                humidity4.innerHTML = response.humidity

                wind_speed4.innerHTML = response.wind_speed

            })
            .catch(err => console.error(err));

        fetch('https://weather-by-api-ninjas.p.rapidapi.com/v1/weather?city=Los Angeles', options)
            .then(response => response.json())
            .then((response) => {
                console.log(response)


                temp5.innerHTML = response.temp

                humidity5.innerHTML = response.humidity

                wind_speed5.innerHTML = response.wind_speed

            })
            .catch(err => console.error(err));


        submit.addEventListener("click", (c) => {
            c.preventDefault()
            getWeather(city.value)


        })

        // submitt.addEventListener("click", (cc) => {
        //     cc.preventDefault()
        //     getWeather(dl.value)


        // })

        getWeather("Rajkot")
  </script>
}
